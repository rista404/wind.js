/**
 * Wind.js 0.4.0
 * @author Nikola Ristic - @rista404
 * @copyright (C) 2015 Nikola Ristic
 * @license MIT
 */
!function(window,document,undefined){"use strict";function Wind(element,options){if(!element)throw new TypeError("Please suply an element.");if(!options)var options={};this.target=element,this.x=options.x||DEFAULTS.x,this.y=options.y||DEFAULTS.y,this.invert=options.invert||DEFAULTS.invert,this.rot3d=options.rot3d||DEFAULTS.rot3d,this.transition=options.transition||DEFAULTS.transition,this.enabled=!1,this.onMouseMove=this.onMouseMove.bind(this),this.moveTarget=this.moveTarget.bind(this),this.calculateMovement=this.calculateMovement.bind(this),this.matrix=this.matrix.bind(this),this.pos3d=this.pos3d.bind(this),this.setup=this.setup.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.setup(),this.start()}var DEFAULTS={x:30,y:30,invert:!1,rot3d:!1,transition:0};Wind.prototype.setup=function(){if(this.isNodeList(this.target)?this.target=Array.prototype.slice.call(this.target):this.target=[this.target],this.rot3d?this.styling=this.pos3d:this.styling=this.matrix,0!==this.transition){var self=this;this.target.forEach(function(element,index){element.style.transition=element.style.WebkitTransition=element.style.MozTransition="transform "+self.transition+"ms"})}},Wind.prototype.start=function(){this.enabled||(this.enabled=!0,window.addEventListener("mousemove",this.onMouseMove))},Wind.prototype.stop=function(){this.enabled&&(this.enabled=!1,window.removeEventListener("mousemove",this.onMouseMove),this.target.forEach(function(element,index){element.style.transform=element.style.WebkitTransform=""}))},Wind.prototype.isNodeList=function(nodes){var stringRepr=Object.prototype.toString.call(nodes);return"object"==typeof nodes&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(stringRepr)&&(0===nodes.length||"object"==typeof nodes[0]&&nodes[0].nodeType>0)},Wind.prototype.onMouseMove=function(event){var position=this.getMousePos(event),movement=this.calculateMovement(position);this.moveTarget(movement)},Wind.prototype.getMousePos=function(event){var posX=0,posY=0;if(!event)var event=window.event;return event.pageX||event.pageY?(posX=event.pageX,posY=event.pageY):(event.clientX||event.clientY)&&(posX=event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,posY=event.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:posX,y:posY}},Wind.prototype.calculateMovement=function(position){return{x:2*this.x/screen.height*position.y-this.x,y:2*this.y/screen.width*position.x-this.y}},Wind.prototype.moveTarget=function(movement){var styling=this.styling(movement.x,movement.y);this.target.forEach(function(element,index){element.style.WebkitTransform=element.style.transform=styling})},Wind.prototype.matrix=function(x,y){if(this.invert)var y=-y,x=-x;return"matrix(1, 0, 0, 1,"+y+", "+x+")"},Wind.prototype.pos3d=function(x,y){if(this.invert)var y=-y;return"rotate3d(1, 0, 0,"+x+"deg) rotate3d(0, 1, 0,"+y+"deg)"},"function"==typeof define&&define.amd?define(Wind):"object"==typeof exports?module.exports=Wind:window.Wind=Wind}(window,document);